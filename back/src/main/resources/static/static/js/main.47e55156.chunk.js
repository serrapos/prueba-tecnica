(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,a,t){e.exports=t(332)},128:function(e,a,t){},129:function(e,a,t){},332:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(42),o=t.n(r),s=(t(128),t(129),t(130),t(131),t(132),t(133),t(14)),c=t(16),i=t(21),m=t(22),u=t(24),h=t(23),d=t(25),p=function(e){function a(){return Object(i.a)(this,a),Object(u.a)(this,Object(h.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){return n.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},n.a.createElement("a",{className:"navbar-brand",href:"/"},"Prueba T\xe9cnica Iberia - Sergio Raposo Vargas"),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarsExampleDefault"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement(s.b,{className:"nav-link",to:"/",exact:!0},"Home")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(s.b,{className:"nav-link",to:"/new-course/"},"Nuevo"))),n.a.createElement("div",{className:"my-2 my-lg-0"},n.a.createElement("span",{className:"text-light"},"Everis - Junio 2019"))))}}]),a}(n.a.Component),v=t(11),f=t(27),b=t.n(f),E=t(120),g=t(28),N=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(u.a)(this,Object(h.a)(a).call(this))).state={courses:[]},e.teacherTemplate=e.teacherTemplate.bind(Object(v.a)(e)),e.fileTemplate=e.fileTemplate.bind(Object(v.a)(e)),e}return Object(d.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.a.get("http://localhost:8080/api/v1/course/active").then(function(a){var t=a.data;e.setState({courses:t})})}},{key:"teacherTemplate",value:function(e,a){return e.teacher.lastName+", "+e.teacher.firstName}},{key:"fileTemplate",value:function(e,a){if(e.fileId){var t="http://localhost:8080/api/v1/filetopics/"+e.fileId;return n.a.createElement("a",{href:t,target:"_blank",download:!0},"Descargar")}return"No hay fichero adjunto"}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("h2",null,"Listado de cursos"),n.a.createElement("div",{className:"text-right p-3"},n.a.createElement(s.b,{to:"/new-course/",className:"btn btn-primary btn-lg"},"Nuevo")),n.a.createElement(E.DataTable,{value:this.state.courses,paginator:!0,paginatorLeft:!0,paginatorRight:!0,rows:5,rowsPerPageOptions:[5,10,20]},n.a.createElement(g.Column,{field:"title",header:"T\xedtulo",sortable:!0}),n.a.createElement(g.Column,{field:"teacher",body:this.teacherTemplate,header:"Profesor",sortable:!0,sortField:"teacher.lastName"}),n.a.createElement(g.Column,{field:"level",header:"Nivel",sortable:!0}),n.a.createElement(g.Column,{field:"numberOfHours",header:"Horas",sortable:!0}),n.a.createElement(g.Column,{field:"fileId",header:"Temario",body:this.fileTemplate})))}}]),a}(n.a.Component),O=t(121),k=t(122),C=(t(196),function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(u.a)(this,Object(h.a)(a).call(this,e))).state={teachers:[],active:!0,level:"BASICO"},t.handleInputChange=t.handleInputChange.bind(Object(v.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(v.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(v.a)(t)),t.onUpload=t.onUpload.bind(Object(v.a)(t)),t.deleteFile=t.deleteFile.bind(Object(v.a)(t)),t}return Object(d.a)(a,e),Object(m.a)(a,[{key:"handleSubmit",value:function(e){var a=this,t={title:this.state.title,level:this.state.level,numberOfHours:this.state.numberOfHours,teacher:{id:this.state.teacher},state:this.state.active,fileId:this.state.fileId};t.title&&t.level&&t.numberOfHours&&t.teacher&&t.teacher.id&&t.state?(this.setState({messageOk:!1,messageError:!1}),b.a.post("http://localhost:8080/api/v1/course",t).then(function(e){var t=e.data;a.setState({messageOk:!0,courseCreate:t,active:!0,level:"BASICO",teacher:"",title:"",numberOfHours:""})}).catch(function(e){409===e.response.status?a.setState({messageError:!0,message:"El t\xedtulo indicado ya existe"}):a.setState({messageError:!0,message:"C\xf3digo de error {error.response.status}"})})):this.setState({messageError:!0,message:"Todos los campos son obligatorios"}),e.preventDefault()}},{key:"handleInputChange",value:function(e){var a=e.target,t="checkbox"===a.type?a.checked:a.value,l=a.name;this.setState(Object(O.a)({},l,t))}},{key:"deleteFile",value:function(e){var a=this.state.fileId;b.a.delete("http://localhost:8080/api/v1/filetopics/"+a).then(function(e){console.log(e)}),this.setState({fileId:null,fileNameUpload:null,fileSizeUpload:null}),e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this;b.a.get("http://localhost:8080/api/v1/teacher").then(function(a){var t=a.data;e.setState({teachers:t})})}},{key:"onUpload",value:function(e){console.log(e);var a=JSON.parse(e.xhr.response),t=Math.round(e.files[0].size/1e3),l=e.files[0].name;a&&a.id&&this.setState({fileId:a.id,fileNameUpload:l,fileSizeUpload:t})}},{key:"render",value:function(){var e,a,t,l=this.state.messageOk;return this.state.messageError?e=n.a.createElement("div",{className:"alert alert-danger mt-3"},"Se ha producido un error: ",this.state.message):l&&(e=n.a.createElement("div",{className:"alert alert-info mt-3"},"Curso creado correctamente. ",n.a.createElement(s.b,{to:"/",exact:!0},"Volver al listado"))),this.state.fileNameUpload?(a=n.a.createElement("p",null,"Fichero subido: ",n.a.createElement("strong",null,this.state.fileNameUpload," (",this.state.fileSizeUpload," KB)")," ",n.a.createElement("a",{href:"",className:"btn btn-danger",onClick:this.deleteFile},"Eliminar fichero")),t=!0):a=!1,n.a.createElement("div",{className:"container"},n.a.createElement("h2",null,"A\xf1adir Curso"),n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"form-check"},n.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"active",name:"active",checked:this.state.active,onChange:this.handleInputChange}),n.a.createElement("label",{className:"form-check-label",htmlFor:"defaultCheck1"},"Activo")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"teacher"},"Profesor"),n.a.createElement("select",{id:"teacher",className:"form-control",value:this.state.teacher,name:"teacher",onChange:this.handleInputChange,required:!0},n.a.createElement("option",null,"Selecciona un profesor..."),this.state.teachers.map(function(e){return n.a.createElement("option",{value:e.id,key:e.id},e.firstName," ",e.lastName)}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"title"},"T\xedtulo"),n.a.createElement("input",{type:"text",className:"form-control",id:"title",name:"title",required:!0,placeholder:"Titulo del curso",onChange:this.handleInputChange})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"level"},"Nivel"),n.a.createElement("select",{id:"level",className:"form-control",value:this.state.level,name:"level",onChange:this.handleInputChange,required:!0},n.a.createElement("option",{value:"BASICO"},"B\xe1sico"),n.a.createElement("option",{value:"INTERMEDIO"},"Intermedio"),n.a.createElement("option",{value:"AVANZADO"},"Avanzado"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"numberOfHours"},"Horas"),n.a.createElement("input",{type:"number",className:"form-control",id:"numberOfHours",name:"numberOfHours",min:0,onChange:this.handleInputChange,required:!0}))),n.a.createElement("div",{className:"col-lg-6"},n.a.createElement("div",{className:"pb-3"},n.a.createElement("h5",null,"Temario:"),n.a.createElement(k.FileUpload,{name:"file",disabled:t,url:"http://localhost:8080/api/v1/filetopics/upload",onUpload:this.onUpload,chooseLabel:"Selecciona un fichero",auto:!0}),a)),n.a.createElement("div",{className:"col-12"},e,n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"A\xf1adir"),n.a.createElement(s.b,{to:"/",className:"ml-3 btn btn-secondary"},"Cancelar")))))}}]),a}(n.a.Component));var y=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(s.a,null,n.a.createElement(p,null),n.a.createElement("main",{role:"main",className:"container"},n.a.createElement(c.a,{path:"/",exact:!0,component:N}),n.a.createElement(c.a,{path:"/new-course/",component:C}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,1,2]]]);
//# sourceMappingURL=main.47e55156.chunk.js.map